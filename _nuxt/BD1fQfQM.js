import{J as U,d as M,u as h,r as F,t as n,v as c,x as r,K as l,B as b,L as d,y as x,M as z,N as v,O as C,_ as w,z as I}from"./Cp_pbtWK.js";import{u as B}from"./DbJACcYC.js";import{u as N}from"./C06B2LS5.js";const G=U("/exit.svg"),P={key:0,class:"upload-text"},T={key:1,class:"file-name"},E={key:2,class:"error-text"},O=M({__name:"UploadImage",setup(k){const p=h(),i=F(null),u=F(!1),s=B(),f=N(),m=o=>["image/jpeg","image/jpg","image/png","image/gif"].includes(o.type)?o.size>2097152?"File size should be less than 2MB.":null:"Only JPG, PNG or GIF files are allowed.",S=async o=>{const e=o.target;if(e.files&&e.files[0]){const t=e.files[0],a=m(t);a?(s.setUploadFailed(a),s.selectedFile=null):(s.setSelectedFile(t),await _(t))}},D=async o=>{var t;o.preventDefault(),u.value=!1;const e=(t=o.dataTransfer)==null?void 0:t.files;if(e&&e[0]){const a=e[0],y=m(a);y?(s.setUploadFailed(y),s.selectedFile=null):(s.setSelectedFile(a),await _(a))}},g=()=>{i.value&&i.value.click()},_=async o=>{s.startUploading();const e=new FormData;e.append("file",o);try{const t=await fetch("/api/upload",{method:"POST",body:e});if(t.ok){const a=await t.json();s.setUploadSuccess(a.imageUrl),p.push("/upload")}else{const a=await t.text();throw new Error(a||"Upload failed")}}catch(t){s.setUploadFailed("Upload failed. Please try again."),console.error(t)}};return(o,e)=>(n(),c("div",{class:"upload-container",onDragover:e[0]||(e[0]=C(()=>{},["prevent"])),onDrop:D,style:v({backgroundColor:l(f).isDarkMode?"#212936":"white"})},[r("div",{class:z(["upload-area",{"drag-over":l(u)}]),onClick:g,style:v({borderColor:l(f).isDarkMode?"#4D5562":"#E5E7EB"})},[e[2]||(e[2]=r("img",{src:G,alt:"exit",class:"exit-icon"},null,-1)),l(s).selectedFile?d("",!0):(n(),c("p",P,[e[1]||(e[1]=b(" Drag & drop a file or ")),r("span",{class:"browse-link",onClick:g},"browse files")])),r("input",{ref_key:"fileInput",ref:i,type:"file",accept:"image/*",onChange:S,class:"file-input"},null,544),l(s).selectedFile?(n(),c("p",T,x(l(s).selectedFile.name),1)):d("",!0),l(s).errorMessage?(n(),c("p",E,x(l(s).errorMessage),1)):d("",!0),e[3]||(e[3]=r("div",{class:"file-restrictions"},[r("p",null,"JPG, PNG or GIF - Max file size 2MB")],-1))],6)],36))}}),V=w(O,[["__scopeId","data-v-2e4d536b"]]),j={};function J(k,p){const i=V;return n(),c("div",null,[I(i)])}const K=w(j,[["render",J]]);export{K as default};
